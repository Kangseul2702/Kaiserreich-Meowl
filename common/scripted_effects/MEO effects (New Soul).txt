ACC_release_MEO = {
	set_global_flag = USA_MEO_existed
	effect_tooltip = { release = MEO }
	hidden_effect = {
		MEO = {
			add_state_core = 386
		}

		every_owned_state = {
			limit = { is_core_of = MEO }
			transfer_state_to = MEO
			teleport_armies = {
				limit = { is_ally_with = ACC }
				to_state_array = owned_controlled_states
			}
		}

		MEO = {
			every_owned_state = {
				set_demilitarized_zone = no
				USA_remove_support_modifiers_from_state = yes
			}

			set_temp_variable = { coalition_partner_var = token:social_conservative }
			add_to_coalition = yes
			set_temp_variable = { coalition_partner_var = token:authoritarian_democrat }
			add_to_coalition = yes
			set_temp_variable = { coalition_partner_var = token:paternal_autocrat }
			add_to_coalition = yes

			# if = {
			# 	limit = { has_dlc_bba = yes }
			# 	load_oob = ACW_WCA_air_bba
			# }
			# else = {
			# 	load_oob = ACW_WCA_air_legacy
			# }

			MEO_spawn_starting_civil_war_divisions = yes
			unit_limit_calculation_effect = yes
			
			country_event = { id = meowl_events.1 days = 3 } # Initialization event
			country_event = { id = meowl_events.4 days = 6 }
			country_event = { id = meowl_events.5 days = 30 } # Invasion Coming..

			# set_temp_variable = { days_to_event = 1633 }
			# calculate_days_since_game_start = yes
			# country_event = { id = america_workers_congress_events.216 days = days_to_event random_days = 180 } #Smedley Butler Passes Away
		}

		#Inherit MIO levels and funds
		# if = {
		# 	limit = { has_dlc_aat = yes }
		# 	set_temp_variable = { USA_mio_transfer_originator = USA }
		# 	set_temp_variable = { USA_mio_transfer_target = WCA }
		# 	USA_transfer_mio_size_and_funds = yes
		# }
	}
}


MEO_spawn_starting_civil_war_divisions = {
	create_MEO_militia_template = yes
	create_MEO_garrison_template = yes
	create_MEO_mounted_militia_template = yes
	create_MEO_organised_reserve_template = yes
	capital_scope = {
		create_unit = {
			division = "division_template = \"Meowl Guard\" start_experience_factor = 0.5"
			owner = PREV
			count = 5
		}
		create_unit = {
			division = "division_template = \"Continental Line\" start_experience_factor = 0.2"
			owner = PREV
			count = 2
		}
		create_unit = {
			division = "division_template = \"Organised Reserve Infantry Division\" start_experience_factor = 0.1"
			owner = PREV
			count = 2
		}
		create_unit = {
			division = "division_template = \"Continental Cavalry\" start_experience_factor = 0.2"
			owner = PREV
		}
	}
}

create_MEO_militia_template = {
	if = {
		limit = {
			NOT = { has_template = "Meowl Guard" }
		}
		division_template = {
			name = "Meowl Guard"
			division_names_group = USA_GAR_01
			regiments = {
				militia = { x = 0 y = 0 }
				militia = { x = 0 y = 1 }
				militia = { x = 0 y = 2 }
				militia = { x = 0 y = 3 }
				militia = { x = 1 y = 0 }
			}
			priority = 0
		}
	}
}

create_MEO_garrison_template = {
	if = {
		limit = {
			NOT = { has_template = "Continental Line" }
		}
		division_template = {
			name = "Continental Line"
			division_names_group = USA_GAR_01
			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
			}
			template_counter = 6
			priority = 0
		}
	}
}

create_MEO_mounted_militia_template = {
	if = {
		limit = {
			NOT = { has_template = "Continental Cavalry" }
		}
		division_template = {
			name = "Continental Cavalry"
			division_names_group = USA_CAV_01
			regiments = {
				cavalry = { x = 0 y = 0 }
				cavalry = { x = 0 y = 1 }
				cavalry = { x = 0 y = 2 }
				cavalry = { x = 1 y = 0 }
				cavalry = { x = 1 y = 1 }
				cavalry = { x = 1 y = 2 }
			}
		}
	}
}

create_MEO_organised_reserve_template = {
	if ={
		limit = {
			NOT = { has_template = "Organised Reserve Infantry Division" }
		}
		division_template = {
			name = "Organised Reserve Infantry Division"
			division_names_group = USA_INF_01
			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }
			}
			template_counter = 6
		}
	}
}